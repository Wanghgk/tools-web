(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[814],{20549:function(){},43290:function(){},4034:function(e,t,n){Promise.resolve().then(n.bind(n,11232)),Promise.resolve().then(n.bind(n,67947))},67947:function(e,t,n){"use strict";n.r(t),n.d(t,{CodeRenderer:function(){return ex},DisplayContent:function(){return em},MarkdownRenderer:function(){return ep}});var r,a,l=n(27573),s=n(84571),o=n(19384),i=n(7653);function c(e){let{didCopy:t,...n}=e;return t?(0,l.jsx)(s.f,{...n}):(0,l.jsx)(o.T,{...n})}var d=n(44115),u=n(87591),m=n(16847),x=n(56544),p=n(87454);function f(e){let{Icon:t,children:n,isAssistant:r=!0,...a}=e;return(0,l.jsxs)("button",{...a,className:(0,d.Z)("flex flex-row items-center gap-1 rounded-md p-1 py-0.5 text-xs transition-opacity delay-100",r?"hover:bg-bg-200":"hover:bg-bg-400",a.className),children:[t&&(0,l.jsx)(t,{size:12}),n]})}let h=(0,i.memo)(e=>{let{node:t,stylesheet:n,style:r,useInlineStyles:a,index:l}=e;return(0,m.ZP)({node:t,stylesheet:n,style:r,useInlineStyles:a,key:l})},(e,t)=>(0,u.vZ)(e.node,t.node));h.displayName="Row";let g=e=>{let{rows:t,stylesheet:n,useInlineStyles:r}=e;return t.map((e,t)=>(0,l.jsx)(h,{index:t,node:e,stylesheet:n,useInlineStyles:r},t))};var b={p:e=>(0,l.jsx)("p",{className:"whitespace-pre-wrap break-words",...e}),li:e=>(0,l.jsx)("li",{className:"whitespace-normal break-words",...e}),ul:e=>(0,l.jsx)("ul",{className:"-mt-1 list-disc space-y-2 pl-8",...e}),ol:e=>(0,l.jsx)("ol",{className:"-mt-1 list-decimal space-y-2 pl-8",...e}),code:e=>{let{inline:t,className:n,children:r,flagShowCodeHeader:a=!0}=e,s=/language-(\w+)/.exec(n||""),o=String(r).trimEnd(),{didCopy:u,copyToClipboard:m}=function(e){let[t,n]=(0,i.useState)(!1);return{didCopy:t,copyToClipboard:(0,i.useCallback)(()=>{navigator.clipboard.writeText(e.trim()).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)}).catch(e=>console.log("Something went wrong",e))},[e])}}(o);return t?(null==n?void 0:n.includes("math"))?(0,l.jsx)("span",{className:n,children:r}):(0,l.jsx)("code",{className:(0,d.Z)("bg-bg-300 text-accent-secondary-000 whitespace-pre-wrap rounded-[0.3rem] px-1 py-px text-[0.95em]",n),children:r}):(0,l.jsxs)("div",{className:"relative flex flex-col rounded-lg",children:[!0===a?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"text-text-300 absolute pl-3 pt-2.5 text-xs",children:s?s[1]:""}),(0,l.jsx)("div",{className:"pointer-events-none sticky my-0.5 ml-0.5 flex items-center justify-end px-1.5 py-1 mix-blend-luminosity top-0",children:(0,l.jsx)("div",{className:"from-bg-300/90 to-bg-300/70 pointer-events-auto rounded-md bg-gradient-to-b p-0.5 backdrop-blur-md",children:(0,l.jsxs)(f,{className:"opacity-60 hover:opacity-100",onClick:m,children:[(0,l.jsx)(c,{didCopy:u,size:14,className:"text-text-500 mr-px -translate-y-[0.5px]"}),(0,l.jsx)("span",{className:"text-text-200 pr-0.5",children:"Copy"})]})})})]}):null,(0,l.jsx)("div",{children:(0,l.jsx)(x.Z,{className:"code-block__code !my-0 !rounded-lg !text-sm !leading-relaxed",language:s?s[1]:"",PreTag:"div",style:p.Z,renderer:g,children:o})})]})}},v=n(58936);n(19072),n(60814);let j=(0,i.createContext)(null),w=()=>{let e=(0,i.useContext)(j);if(void 0===e)throw Error("useCurrentConversationSettings must be used within a CurrentConversationSettingsProvider");return e};var y=n(92472);(r=a||(a={})).Text="text/plain",r.Markdown="text/markdown",r.Html="text/html",r.Code="application/vnd.ant.code",r.Svg="image/svg+xml",r.Mermaid="application/vnd.ant.mermaid",r.React="application/vnd.ant.react";let N={"text/plain":{syntaxName:"plaintext",displayName:"text",extension:()=>"txt"},"text/markdown":{syntaxName:"markdown",displayName:"document",extension:()=>"md"},"text/html":{syntaxName:"html",displayName:"website",extension:()=>"html"},"image/svg+xml":{syntaxName:"svg",displayName:"image",extension:()=>"svg"},"application/vnd.ant.code":{syntaxName:"plaintext",displayName:"code",extension:e=>{switch(null==e?void 0:e.language){case"python":return"py";case"javascript":return"js";case"typescript":return"ts";case"java":return"java";case"csharp":return"cs";case"go":return"go";case"rust":return"rs";case"ruby":return"rb";case"php":return"php";case"swift":return"swift";case"kotlin":return"kt";case"dart":return"dart";case"scala":return"scala";case"perl":return"pl";case"elixir":return"ex";case"haskell":return"hs";case"clojure":return"clj";case"r":return"r";case"groovy":return"groovy";case"bash":return"sh";case"css":return"css";case"scss":return"scss";case"less":return"less";case"sql":return"sql";case"graphql":return"graphql";case"json":return"json";case"html":return"html";default:return"txt"}}},"application/vnd.ant.mermaid":{syntaxName:"mermaid",displayName:"diagram",extension:()=>"mermaid"},"application/vnd.ant.react":{syntaxName:"tsx",displayName:"component",extension:()=>"tsx"}},C="antArtifact",k="<".concat(C,"(?:\\s+([^>]*)>|(?!>)\\S*)"),E="</".concat(C,">");RegExp("".concat(k,"([\\s\\S]*?)(?:").concat(E,"|$)"),"g"),RegExp("".concat(k,"[\\s\\S]*?(?:").concat(E,"|$)"),"g");let S="ANTARTIFACTLINK",R="antThinking",_="<".concat(R,">");RegExp("".concat(_,"[\\s\\S]*?(?:</").concat(R,">|$)"),"g");var T=n(30068),M=n(33408),A=n(95572);let z=RegExp("<".concat(S,"\\s+(.*?)\\s*\\/>"),"g");var P=()=>e=>{(0,A.Vn)(e,"html",(e,t,n)=>{let r=e.value.match(z);if(r){let e=r.map(e=>{let{id:t,type:n,title:r,language:l,isClosed:s}=function(e){var t;let n=e.match(/identifier="([^"]*)"/),r=n?n[1]:"",l=e.match(/type="([^"]*)"/),s=l?(t=l[1],Object.values(a).includes(t)?t:"text/plain"):"text/plain",o=e.match(/title="([^"]*)"/),i=o?o[1]:"Untitled artifact",c=e.match(/language="([^"]*)"/),d=c?c[1]:void 0,u=e.match(/isClosed="(true|false)"/);return{id:r,type:s,title:i,language:d,isClosed:u?"true"===u[1]:void 0,isRunnable:!!e.includes("is_runnable")||void 0}}(e.replace("<".concat(S," "),"").replace(/\s*\/>/,"").trim()),o={id:t,title:r,type:n,isClosed:s};return l&&(o.language=l),{type:"artifactComponent",data:{hName:"artifactComponent",hProperties:o}}});n.children.splice(t,1,...e)}})},L=()=>e=>{(0,A.Vn)(e,"list",e=>{e.spread=!1}),(0,A.Vn)(e,"listItem",e=>{e.spread=!1})},O=()=>{let[e,t]=(0,i.useState)({remarkMath:null,rehypeKatex:null});return(0,i.useEffect)(()=>{(async()=>{let[e,r]=await Promise.all([n.e(418).then(n.bind(n,17418)),Promise.all([n.e(287),n.e(720)]).then(n.bind(n,14720))]);t({remarkMath:e.default,rehypeKatex:r.default})})()},[]),e},Z=n(96111),D=n(23285);function H(){let e=(0,v._)(["\n  rounded-md\n  overflow-hidden\n  shadow-[0_4px_32px_rgba(0,0,0,0.3),_0_0_0_0.5px_rgba(0,0,0,0.25)]\n"]);return H=function(){return e},e}n(84095),y.Z.div(H());var F=n(2715),I=n(17618),W=n(18314),q=n(46093),U=n(18860);let $=e=>{let{type:t,size:n,className:r,isLoading:s=!1}=e;return(0,l.jsx)("div",{className:(0,d.Z)("bg-bg-100 text-text-500 flex items-center justify-center rounded-l-[inherit]","default"===n&&"w-14","sm"===n&&"w-11",r),children:s?(0,l.jsx)(F.Z,{size:"sm"}):(0,l.jsx)(()=>{switch(t){case a.Markdown:return(0,l.jsx)(I.X,{size:24});case a.Svg:return(0,l.jsx)(W.j,{size:24});case a.Html:return(0,l.jsx)(q.T,{size:24});case a.Code:case a.Text:default:return(0,l.jsx)(U.E,{size:24})}},{})})},B=e=>{let{isOpen:t=!1,url:n,onClose:r,onConfirm:a}=e;return(0,l.jsxs)(D.ZP,{title:"Open a link from the web",isOpen:t,onClose:r,children:[(0,l.jsxs)("p",{className:"break-words",children:["You’re about to be navigated to ",n,". Is that okay?"]}),(0,l.jsxs)(D.dm,{children:[(0,l.jsx)(Z.Z,{variant:"outline",onClick:a,children:"Continue"}),(0,l.jsx)(Z.Z,{variant:"secondary",onClick:r,children:"Cancel"})]})]})};function V(){let e=(0,v._)(["\n  tracking-tighter\n  flex-1\n  text-left\n  mr-4\n  [&_a]:font-medium\n  [&_a]:hover:underline\n"]);return V=function(){return e},e}let Y=[],G=(0,i.memo)(e=>{var t,n;let{text:r,hasLinkRef:a,hasCodeRef:s,className:o,linkTarget:c="_blank",isStreaming:u=!1,flagShowCodeHeader:m,unsafeAllowNavigationWithoutConfirmation:x,onOpenArtifact:p,isLastMessage:f,publishedArtifacts:h}=e,g=(0,i.useRef)(null),v=null!=h?h:Y;(0,i.useEffect)(()=>{let e=e=>{var t,n,r;let a=window.getSelection();if(a&&(null===(t=g.current)||void 0===t?void 0:t.contains(a.anchorNode))){let t=a.getRangeAt(0).cloneContents(),l=document.createElement("div");for(let e of(l.appendChild(t),l.getElementsByTagName("*")))e.removeAttribute("color"),e.removeAttribute("fontFamily");null===(n=e.clipboardData)||void 0===n||n.setData("text/html",l.innerHTML),null===(r=e.clipboardData)||void 0===r||r.setData("text/plain",l.textContent||""),e.preventDefault()}};return document.addEventListener("copy",e),()=>{document.removeEventListener("copy",e)}},[]);let j=null!==(n=null===(t=w())||void 0===t?void 0:t.preview_feature_uses_latex)&&void 0!==n&&n,y=!!p,{remarkMath:N,rehypeKatex:C}=O(),k=(0,i.useMemo)(()=>r.replace(/(^|\n)(\s?)•(\s?)/g,"$1$2- "),[r]),E=(0,i.useMemo)(()=>({h1:e=>{let{node:t,...n}=e;return(0,l.jsx)("h1",{className:"font-600 text-2xl font-bold",...n})},h2:e=>{let{node:t,...n}=e;return(0,l.jsx)("h2",{className:"font-600 text-xl font-bold",...n})},h3:e=>{let{node:t,...n}=e;return(0,l.jsx)("h3",{className:"font-600 text-lg font-bold",...n})},h4:e=>{let{node:t,...n}=e;return(0,l.jsx)("h2",{className:"font-600 text-base font-bold",...n})},p:e=>{let{node:t,...n}=e;return(0,l.jsx)(b.p,{...n})},blockquote:e=>{let{node:t,...n}=e;return(0,l.jsx)("blockquote",{className:"border-border-200 border-l-4 pl-4",...n})},li:e=>{let{node:t,ordered:n,...r}=e;return(0,l.jsx)(b.li,{...r})},ul:e=>{let{node:t,ordered:n,...r}=e;return(0,l.jsx)(b.ul,{...r})},ol:e=>{let{node:t,ordered:n,...r}=e;return(0,l.jsx)(b.ol,{...r})},img:e=>{let{node:t,...n}=e;return x?(0,l.jsx)("img",{...n}):(0,l.jsx)(K,{...n})},code(e){let{node:t,...n}=e;return s&&!n.inline&&(s.current=!0),(0,l.jsx)(b.code,{...n,flagShowCodeHeader:m})},a(e){let{node:t,...n}=e;return a&&(a.current=!0),x?(0,l.jsx)("a",{target:c,...n}):(0,l.jsx)(X,{linkTarget:c,...n})},table(e){let{node:t,...n}=e;return(0,l.jsx)("pre",{className:"font-styrene border-border-100/50 overflow-x-scroll whitespace-nowrap rounded border-[0.5px] shadow-[0_2px_12px_rgba(0,0,0,0.05)]",children:(0,l.jsx)("table",{className:"bg-bg-100 min-w-full border-separate border-spacing-0 text-sm leading-[1.88888]",...n})})},thead(e){let{node:t,...n}=e;return(0,l.jsx)("thead",{className:"border-b-border-100/50 border-b-[0.5px] text-left",...n})},tr(e){let{node:t,isHeader:n,...r}=e;return(0,l.jsx)("tr",{className:"[tbody>&]:odd:bg-bg-500/10",...r})},td(e){let{node:t,isHeader:n,...r}=e;return(0,l.jsx)("td",{className:"border-t-border-100/50 [&:not(:first-child)]:-x-[hsla(var(--border-100) / 0.5)] border-t-[0.5px] px-2 [&:not(:first-child)]:border-l-[0.5px]",...r})},th(e){let{node:t,isHeader:n,...r}=e;return(0,l.jsx)("th",{className:"text-text-000 [&:not(:first-child)]:-x-[hsla(var(--border-100) / 0.5)] font-400 px-2 [&:not(:first-child)]:border-l-[0.5px]",...r})},artifactComponent(e){let{node:t}=e;return(0,l.jsx)(J,{properties:t.properties,isStreaming:u,isLastMessage:f,onOpenArtifact:p,publishedArtifacts:v})}}),[x,s,m,a,c,u,p,f,v]),S=(0,i.useMemo)(()=>{let e=[M.Z,L];return y&&e.push(P),j&&N&&e.push([N,{singleDollarTextMath:!1}]),e},[N,j,y]),R=(0,i.useMemo)(()=>{let e=[];return j&&C&&e.push(C),e},[C,j]);return(0,l.jsx)("div",{ref:g,children:(0,l.jsx)(T.D,{className:(0,d.Z)("grid-col-1 grid gap-2.5 [&_>_*]:min-w-0",o),remarkPlugins:S,rehypePlugins:R,components:E,children:k})})});G.displayName="StandardMarkDown";let K=e=>{let{src:t,...n}=e,[r,a]=(0,i.useState)(!1),s=()=>{window.open(t,"_blank")};return t?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>a(!0),className:"bg-bg-300 border-border-300 font-styrene text-text-300 inline-block grid h-32 w-40 items-center justify-items-center rounded-xl border p-4",children:"Show Image"}),(0,l.jsx)(B,{isOpen:r,url:t,onClose:()=>a(!1),onConfirm:()=>{s(),a(!1)}})]}):(0,l.jsx)("img",{...n})},X=e=>{let{linkTarget:t,href:n,...r}=e,[a,s]=(0,i.useState)(!1),o=()=>{window.open(n,t)};return n?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("a",{onClick:e=>{e.preventDefault(),s(!0)},href:n,...r}),(0,l.jsx)(B,{isOpen:a,url:n,onClose:()=>s(!1),onConfirm:()=>{o(),s(!1)}})]}):(0,l.jsx)("a",{...r})},J=e=>{let{properties:t,isStreaming:n,onOpenArtifact:r,isLastMessage:a,publishedArtifacts:s}=e;return(0,l.jsx)("div",{className:"font-styrene relative",children:(0,l.jsxs)("button",{className:"border-0.5 border-border-200 bg-bg-100 hover:border-border-100 flex flex-1 items-stretch rounded-lg text-left transition-all hover:drop-shadow-sm active:scale-[0.9875]",onClick:()=>null==r?void 0:r(t.id),"aria-label":"Preview contents",children:[(0,l.jsx)($,{size:"default",type:t.type,isLoading:n&&a&&!t.isClosed,className:"bg-bg-200 border-border-200 border-r-[0.5px]"}),(0,l.jsxs)("div",{className:"padding min-w-0 flex-1 px-4 py-3",children:[(0,l.jsx)("div",{className:"break-words text-sm font-medium leading-tight",children:t.id?(0,l.jsx)(l.Fragment,{children:t.title||"Untitled Artifact"}):"Generating..."}),(0,l.jsx)("div",{className:"text-text-400 line-clamp-1 text-xs",children:t.type?(0,l.jsxs)(l.Fragment,{children:["Click to open ",N[t.type].displayName]}):null}),s.some(e=>e.artifact_identifier===t.id&&!0!==e.deleted)&&(0,l.jsx)("div",{className:"text-accent-secondary-100 bg-accent-secondary-900 inline-block rounded-lg px-1.5 py-1 text-xs font-medium",children:"Published"})]})]})})};y.Z.div(V());let Q=(0,i.forwardRef)((e,t)=>{let{className:n,children:r,disabled:a}=e,s=(0,i.useRef)(0),o=(0,i.useRef)(!0),c=(0,i.useRef)(null),d=(0,i.useCallback)(()=>{c.current&&o.current&&!(c.current.scrollHeight-c.current.clientHeight<c.current.scrollTop)&&(c.current.scrollTop=c.current.scrollHeight-c.current.clientHeight+5)},[]);return(0,i.useImperativeHandle)(t,()=>({reset(){s.current=0,o.current=!0,d()},scrollToBottomIfPinned:d}),[d]),(0,i.useLayoutEffect)(()=>{!a&&r&&d()},[r,a,d]),(0,l.jsx)("div",{className:n,onScroll:e=>{if(a)return;let t=e.currentTarget.scrollTop,n=function(e,t){if(!e)return!1;{let n=e.scrollHeight-8;return Math.ceil(t+e.offsetHeight)>=Math.floor(n)}}(c.current,t),r=t>s.current;n&&r?o.current=!0:n||r||(o.current=!1),s.current=t},ref:c,children:r})});Q.displayName="AutoScroll";var ee=n(51780),et=n(80248);let en=e=>(0,et.useGate)(e);var er=n(10241),ea=n(89564),el=n(90701),es=n(28946),eo=n(13411);let ei=e=>{let{children:t,sendMessage:n,contentType:r="text"}=e,{value:a}=en("art_last_letter"),s=a&&void 0!==n,[o,c]=(0,i.useState)([]),[u,m]=(0,i.useState)({top:0,left:0,width:0}),[x,p]=(0,i.useState)(!1),[h,g]=(0,i.useState)(!1),[b,v]=(0,i.useState)(""),[j,w]=(0,i.useState)(""),[y,N]=(0,i.useState)(!1),C=(0,i.useRef)(null),k=(0,i.useRef)(null),E=(0,i.useCallback)(e=>{var t;let n=function(e){let t=[];for(let n=0;n<e.rangeCount;n++){let r=e.getRangeAt(n);if(r.startContainer===r.endContainer&&r.startContainer.nodeType===Node.TEXT_NODE){let e=r.startContainer,n=document.createRange();for(let a=r.startOffset;a<r.endOffset;a++){n.setStart(e,a),n.setEnd(e,a+1);let r=Array.from(n.getClientRects());t.push(...r)}n.detach()}else{let e=function(e){let t;let n=[],r=document.createTreeWalker(e.commonAncestorContainer,NodeFilter.SHOW_TEXT,t=>e.intersectsNode(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT);for(;t=r.nextNode();)n.push(t);return n}(r);e.forEach((n,a)=>{let l=document.createRange(),s="length"in n?n.length:0,o=0===a,i=a===e.length-1,c=o?r.startOffset:0,d=i?r.endOffset:s;l.setStart(n,c),l.setEnd(n,d);let u=Array.from(l.getClientRects());t.push(...u),l.detach()})}}return t}(e),r=null===(t=C.current)||void 0===t?void 0:t.getBoundingClientRect();return Array.from(n).map(e=>({top:e.top-((null==r?void 0:r.top)||0)-2.5,left:e.left-((null==r?void 0:r.left)||0),width:e.width,height:e.height+5.5}))},[]),S=(0,i.useCallback)(e=>{var t;let n=e.getRangeAt(0);return null===(t=C.current)||void 0===t?void 0:t.contains(n.commonAncestorContainer)},[]);(0,i.useEffect)(()=>{let e=()=>{N(!0)},t=e=>{if(k.current&&k.current.contains(e.target))return;let t=window.getSelection();if(t&&!t.isCollapsed&&S(t)){var n,r,a,l;let e=E(t);c(e);let s=e.map(e=>e.top+e.height).sort((e,t)=>t-e)[0],o=e.map(e=>e.left).sort((e,t)=>e-t)[0];m({top:Math.min((null!==(a=null===(n=C.current)||void 0===n?void 0:n.scrollHeight)&&void 0!==a?a:0)-50,s),left:o,width:((null!==(l=null===(r=C.current)||void 0===r?void 0:r.scrollWidth)&&void 0!==l?l:1e3)-o)/3*2}),p(!0),g(!1),w(t.toString())}else c([]),p(!1),g(!1),w("");N(!1)};return s&&(document.addEventListener("mousedown",e),document.addEventListener("mouseup",t)),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("mouseup",t)}},[E,S,s]);let R=e=>{s&&(n(e),v(""),g(!1),p(!1),c([]))},_=()=>"text"===r?j.split("\n").map(e=>"> ".concat(e)).join("\n"):"code"===r?"```\n".concat(j,"\n```"):void 0,T=()=>{R({prompt:"".concat(_(),"\n\n").concat(b),attachments:[],files:[]})};return(0,l.jsxs)("div",{ref:C,className:(0,d.W)("w-full h-full relative",s?y?"text"===r?"[&_:not(input)::selection]:bg-accent-main-000/20":"[&_:not(input)::selection]:bg-bg-200/30":"[&_*::selection]:bg-transparent":"","text"===r?"[&_:not(input)::selection]:text-text-200":"[&_:not(input)::selection]:text-[inherit]"),children:[t,o.map((e,t)=>(0,l.jsx)("div",{className:(0,d.W)("absolute pointer-events-none","text"===r?"bg-accent-main-000/20":"bg-bg-200/30"),style:{top:e.top,left:e.left,width:e.width,height:e.height}},t)),(0,l.jsx)(es.M,{children:x&&(0,l.jsx)(eo.E.div,{className:(0,d.W)("absolute z-20"),initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:30,stiffness:400,delay:.3},style:{top:u.top+5,left:u.left},children:(0,l.jsx)("div",{className:(0,d.W)("border-0.5 flex items-center rounded-lg px-2 pb-1 pt-3 shadow-sm transition","text"===r?"bg-bg-000 text-text-400 border-border-300":"bg-[rgba(61,67,79,1)] text-[rgba(206,204,197,1)] border-white/10"),children:(0,l.jsxs)("div",{className:"-mx-1 -mt-2 flex items-stretch justify-between gap-0.5",children:[(0,l.jsxs)(f,{onClick:()=>{g(!0)},isAssistant:!0,className:"text"===r?"":"hover:!bg-[rgba(75,81,93,1)]",children:[(0,l.jsx)(er.A,{size:16}),"Improve"]}),(0,l.jsxs)(f,{onClick:()=>{R({prompt:"Can you explain this section to me in more detail?\n\n".concat(_()),attachments:[],files:[]})},isAssistant:!0,className:"text"===r?"":"hover:!bg-[rgba(75,81,93,1)]",children:[(0,l.jsx)(ea.v,{size:16}),"Explain"]})]})})})}),h&&(0,l.jsxs)("form",{className:(0,d.W)("z-20 absolute flex gap-2 p-2 rounded-md shadow-md focus-within:ring-1 ring-white/10","text"===r?"bg-white text-text-200":"bg-[rgba(26,25,21,1)] text-[rgba(206,204,197,1)]"),style:{top:u.top+5,left:u.left,width:u.width},ref:k,onSubmit:e=>{e.preventDefault(),T()},children:[(0,l.jsx)("input",{type:"text",value:b,onChange:e=>v(e.target.value),placeholder:"How would you like to improve the artifact?",className:(0,d.W)("py-0.5 px-0 border-0 bg-transparent text-sm grow outline-none focus:outline-none focus:ring-0","text"===r?"text-text-200":"text-[rgba(206,204,197,1)]"),autoFocus:!0}),b.trim().length>0?(0,l.jsx)(Z.Z,{variant:"flat",size:"sm",onClick:()=>T(),"aria-label":"Send Message",type:"submit",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 select-none",children:[(0,l.jsx)("span",{children:"Update"})," ",(0,l.jsx)(el.R,{weight:"bold",size:16,className:"bg-accent-main-200 rounded-[3px] p-0.5"})]})}):null]})]})};var ec=n(11492);let ed=(e,t)=>{let n=(0,i.useRef)(0),r=(0,i.useCallback)(()=>{n.current=0},[]),a=(0,i.useCallback)(l=>{let s=e.current;if(!s||!s.contentWindow)return;s.contentWindow.postMessage(l,"*");let o=setTimeout(()=>{n.current<5?(n.current+=1,a(l)):t()},1e3),i=e=>{"MESSAGE_RECEIVED"===e.data.type&&(clearTimeout(o),window.removeEventListener("message",i),t(),r())};return window.addEventListener("message",i),()=>{clearTimeout(o),window.removeEventListener("message",i)}},[e,t,r]);return a},eu=(0,i.forwardRef)((e,t)=>{let{content:n,className:r,type:a,onSandboxConfirmation:s,onRunComplete:o,onPyodideReady:c}=e,{userContentRendererUrl:d}=(0,ec.useConfiguration)(),u=(0,i.useRef)(null),[m,x]=(0,i.useState)(!0),p=(0,i.useCallback)(()=>{x(!1),null==s||s()},[s]),f=(0,i.useCallback)(()=>{null==o||o()},[o]),h=(0,i.useCallback)(()=>{null==c||c()},[c]),g=ed(u,p),b=(0,i.useCallback)(()=>{a&&setTimeout(()=>{x(!0),g({type:a,content:n})},100)},[n,a,g]);return(0,i.useEffect)(()=>{let e=u.current;e&&e.src!==d&&(e.src=d)},[d]),(0,i.useEffect)(()=>{let e=e=>{e.data&&"RUN_COMPLETE"===e.data.type?f():e.data&&"PYODIDE_READY"===e.data.type?h():e.data&&"USER_CONTENT_RENDERER_READY"===e.data.type&&b()};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[h,f,b]),(0,i.useImperativeHandle)(t,()=>({refresh:()=>{x(!0);let e=u.current;e&&(e.src=d,e.onload=b)},run:()=>{let e=u.current;e&&e.contentWindow&&e.contentWindow.postMessage({type:"RUN"},"*")}})),(0,l.jsxs)("div",{className:"relative ".concat(r),children:[(0,l.jsx)("iframe",{ref:u,className:"h-full w-full",sandbox:"allow-scripts",title:"Claude content",loading:"lazy"}),(0,l.jsx)(es.M,{children:m&&(0,l.jsx)(eo.E.div,{className:"bg-bg-100 absolute inset-0 z-10",initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeInOut"}})})]})});eu.displayName="RichSandbox";let em=e=>{let{content:t,language:n,type:r,showRaw:s,richSandboxRef:o,isCurrentStreaming:i,onSandboxConfirmation:c,pythonRunOptions:d,sendMessage:u}=e,m={[a.Text]:e=>{let{content:t}=e;return(0,l.jsx)(l.Fragment,{children:t})},[a.Code]:e=>{let{content:t,language:n}=e;return d?(0,l.jsx)(ef,{runnableState:d.runnableState,richSandboxRef:o,content:t,onSandboxConfirmation:c,onRunComplete:d.onRunComplete,onPyodideReady:d.onPyodideReady,children:(0,l.jsx)(Q,{className:"relative flex w-full flex-1 overflow-x-auto overflow-y-scroll",children:(0,l.jsx)(ex,{content:t,language:n,sendMessage:u},"code-".concat(i))})}):(0,l.jsx)(Q,{className:"relative flex w-full flex-1 overflow-x-auto overflow-y-scroll",children:(0,l.jsx)(ex,{content:t,language:n,sendMessage:u},"code-".concat(i))})},[a.Markdown]:e=>{let{content:t}=e;return(0,l.jsx)(Q,{className:"relative flex w-full flex-1 overflow-x-hidden overflow-y-scroll",children:(0,l.jsx)(ep,{content:t,sendMessage:u})})},[a.Html]:e=>{let{content:t}=e;return(0,l.jsx)(eu,{ref:o,className:"h-full w-full border-none bg-white",content:t,type:a.Html,onSandboxConfirmation:c})},[a.Svg]:e=>{let{content:t}=e;return(0,l.jsx)(eu,{ref:o,className:"h-full w-full border-none bg-white",content:t,type:a.Svg,onSandboxConfirmation:c})},[a.Mermaid]:e=>{let{content:t}=e;return(0,l.jsx)(eu,{ref:o,className:"h-full w-full border-none bg-white",content:t,type:a.Mermaid,onSandboxConfirmation:c})},[a.React]:e=>{let{content:t}=e;return(0,l.jsx)(eu,{ref:o,className:"h-full w-full border-none bg-white",content:t,type:a.React,onSandboxConfirmation:c})},fallback:e=>{let{content:t}=e;return(0,l.jsx)(Q,{className:"relative flex w-full flex-1 overflow-x-auto overflow-y-scroll",children:(0,l.jsx)(ex,{content:t,language:n,sendMessage:u},"code-".concat(i))})}};if(!s){var x;return(null!==(x=m[r])&&void 0!==x?x:m.fallback)({content:t,language:n})}return(0,l.jsx)(Q,{className:"relative flex w-full flex-1 overflow-x-auto overflow-y-scroll",children:(0,l.jsx)(ex,{content:t,language:n,sendMessage:u},"code-".concat(i))})},ex=e=>{let{content:t,language:n,sendMessage:r}=e;return(0,l.jsx)(ei,{sendMessage:r,contentType:"code",children:(0,l.jsx)(x.Z,{className:"code-block__code !my-0 h-fit min-h-full w-fit min-w-full !rounded-none !text-sm !leading-relaxed",language:n,PreTag:"div",style:p.Z,renderer:g,children:t})})},ep=e=>{let{content:t,sendMessage:n}=e;return(0,l.jsx)(ei,{sendMessage:n,children:(0,l.jsx)("div",{className:"font-claude-message mx-auto w-full max-w-3xl px-4 pb-8 pt-4 leading-[1.65rem] -tracking-[0.015em] md:px-8",children:(0,l.jsx)(G,{text:t,className:"space-y-4"})})})},ef=(0,i.memo)(e=>{let{children:t,runnableState:n,richSandboxRef:r,content:s,onSandboxConfirmation:o,onRunComplete:c,onPyodideReady:d}=e,u=(0,i.useRef)(null);return(0,i.useEffect)(()=>{var e,t,r;"completed"===n||"running"===n?10>((null===(e=u.current)||void 0===e?void 0:e.getSize())||0)&&(null===(t=u.current)||void 0===t||t.resize(33)):null===(r=u.current)||void 0===r||r.resize(0)},[n]),(0,l.jsxs)(ee.eh,{direction:"vertical",children:[(0,l.jsx)(ee.s_,{minSize:25,className:"flex",children:t}),(0,l.jsx)(ee.OT,{className:"border-t-0.5 border-[#4d5566]"}),(0,l.jsxs)(ee.s_,{ref:u,className:"bg-[#1B1F23] relative text-oncolor-100",children:["running"===n&&(0,l.jsx)("div",{className:"text-oncolor-100 absolute z-10 inset-0 flex bg-[#1B1F23]",children:(0,l.jsx)("div",{className:"opacity-30 w-full h-full flex",children:(0,l.jsx)(F.Z,{size:"sm",inheritColor:!0})})}),(0,l.jsx)(eu,{ref:r,className:"h-full w-full border-none bg-white",content:s,type:a.Code,onSandboxConfirmation:o,onRunComplete:c,onPyodideReady:d})]})]})});ef.displayName="RunnableCodeWrapper"}},function(e){e.O(0,[44,542,851,406,232,293,362,114,744],function(){return e(e.s=4034)}),_N_E=e.O()}]);